<table #tbl style="margin-bottom: 15px" [style.min-height]="HEIGHT">
  <tbody *ngIf="(upsert$ | async) as u">
    <tr>
      <td align="right">
        <img
          [src]="gsu(u.data.url, 1240)"
          width="400"
          alt="thumbnail"
          style="padding: 5px"
        />
        <br />
        Foto by:
        <app-orang [profile]="u.uploader"></app-orang>
        <ng-container *ngIf="u.meta.m">
          via
          {{ u.meta.m[0] }}
          ({{ u.meta.m[1] }})
        </ng-container>
        <a *ngIf="u.meta.x" href="{{ mapLink(u.meta) }}" target="_blank"
          ><mat-icon>map</mat-icon></a
        >
      </td>
      <td valign="top" width="200">
        <ng-template #done>
          Paslon1: {{ u.data.sum.paslon1 }}<br />
          Paslon2: {{ u.data.sum.paslon2 }}<br />
          Sah: {{ u.data.sum.sah }}<br />
          TidakSah: {{ u.data.sum.tidakSah }}<br />

          <p>Dicek oleh: <app-orang [profile]="u.reviewer"></app-orang></p>
        </ng-template>

        <ng-container *ngIf="u.data.sum.error || !u.reviewer; else done">
          <p *ngIf="u.data.sum.error" style="background-color: #FDD">
            Kesalahan dilaporkan oleh:<br />
            <app-orang [profile]="u.reporter"></app-orang>
          </p>

          <form [formGroup]="formGroup">
            <mat-form-field>
              <input
                class="angka"
                matInput
                placeholder="Suara Paslon 1"
                formControlName="paslon1Ctrl"
                type="number"
                required
              />
            </mat-form-field>
            <br />
            <mat-form-field>
              <input
                class="angka"
                matInput
                placeholder="Suara Paslon 2"
                formControlName="paslon2Ctrl"
                type="number"
                required
              />
            </mat-form-field>
            <br />
            <mat-form-field>
              <input
                class="angka"
                matInput
                placeholder="Suara Sah"
                formControlName="sahCtrl"
                type="number"
                required
              />
            </mat-form-field>
            <br />
            <mat-form-field>
              <input
                class="angka"
                matInput
                placeholder="Suara Tidak Sah"
                formControlName="tidakSahCtrl"
                type="number"
                required
              />
            </mat-form-field>
            <br />

            <p *ngIf="u.deleted; else decide">
              Foto telah ditolak.
            </p>
            <ng-template #decide>
              <p>
                <button
                  type="submit"
                  [disabled]="formGroup.invalid || isLoading"
                  mat-raised-button
                  color="primary"
                  (click)="approve(u, false)"
                >
                  Approve
                </button>

                &nbsp;
                <button
                  mat-raised-button
                  color="warn"
                  (click)="approve(u, true)"
                  [disabled]="isLoading"
                >
                  Reject
                </button>
              </p>
            </ng-template>
          </form>
        </ng-container>
      </td>
    </tr>
  </tbody>
</table>
