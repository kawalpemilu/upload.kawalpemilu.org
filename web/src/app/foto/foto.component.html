<h2>Mari Tes Upload Foto</h2>

<p>
  Sekarang adalah masa uji coba. Supaya kamu nggak gagap teknologi (gaptek) di
  hari-H, mari coba sistemnya sekarang. Dengan menguji coba, kamu jadi tahu
  lokasi TPS yang akan kamu kawal dan kami pun jadi tahu bahwa TPS tersebut
  sudah akan terkawal di hari-H.
</p>

<p>
  Yuk kita coba. Caranya:
</p>

<ul>
  <li>Temukan lokasi TPS di kelurahan tempat kamu berdomisili</li>

  <li>
    Ambil beberapa foto dengan ponsel kamu. Tapi ambilnya foto netral ya, jangan
    hal-hal yang terkait dengan kampanye. Foto-foto yang nggak netral atau nggak
    pantas untuk ditunjukkan ke publik tidak akan di-approve.
  </li>

  <li>
    Setelah koneksi internet stabil, baru deh masuk ke situs ini dengan browser
    Chrome atau Safari untuk upload semua foto satu per satu.
  </li>

  <li>
    Lewat uji coba ini, jika nanti pada hari-H kamu ingin upload banyak foto
    dari TPS yang berbeda, misalnya, kamu sudah terbiasa dengan cara kerja situs
    ini.
  </li>
</ul>

<p>
  <a [routerLink]="['/h', 0]" mat-raised-button color="primary">
    Cari TPS Anda dan Tes Upload Foto
  </a>
</p>

<p>
  Semua foto tes akan dihapus pada tanggal 16 April 2019.
</p>

<p>
  Pada tanggal <b>17 April 2019</b>, setelah penghitungan suara selesai, kamu
  diharapkan kembali ke TPS dan memfoto Formulir C1 Plano. Biasanya, formulir
  ini dipajang di papan besar seperti
  <a href="http://upload.kawalpemilu.org/assets/contoh.jpeg" target="_blank"
    >contoh foto ini</a
  >. Setelah kamu memfoto Formulir C1 Plano, upload deh foto tersebut ke situs
  ini.
</p>

<ng-container *ngIf="(photos$ | async) as photos">
  <ng-container *ngIf="photos.length > 0">
    <p class="tips">
      <b>Tips:</b> klik nama kelurahan di bawah untuk meng-upload foto lain di
      kelurahan yang sama.
    </p>
    <table border="1" cellpadding="5" cellspacing="0">
      <tr bgcolor="lightgray" height="30">
        <th width="120">Lokasi TPS</th>
        <td width="100%"><b>Foto-foto yang telah Anda upload</b></td>
      </tr>
      <tr
        *ngFor="let p of photos; let odd = odd; let i = index"
        [style.background-color]="odd ? '#FFF' : '#EEE'"
      >
        <td align="center" width="120">
          <a style="text-decoration: none" [routerLink]="['/t', p.kelId]">{{
            p.kelName || p.kelId
          }}</a>
          <p style="border: 1px solid black; width: 80px; padding: 5px">
            TPS # <b style="font-size: large">{{ p.tpsNo }}</b>
          </p>
          <app-upload-sequence
            [kelId]="p.kelId"
            [kelName]="p.kelName"
            [tpsNo]="p.tpsNo"
            [value]="'Tambah Foto'"
          ></app-upload-sequence>
        </td>
        <td>
          <div class="cdk-virtual-scroll-data-source">
            <cdk-virtual-scroll-viewport
              orientation="horizontal"
              itemSize="125"
              class="viewport"
            >
              <div *cdkVirtualFor="let t of p.photos" class="item">
                <table cellpadding="0" cellspacing="0">
                  <tbody>
                    <tr>
                      <td align="center" width="125" height="125">
                        <app-thumbnail
                          *ngIf="!t.url.startsWith('data')"
                          [url]="t.url"
                          [srcSize]="110"
                          [maxHeight]="'110px'"
                          [maxWidth]="'110px'"
                          [linkSize]="980"
                        ></app-thumbnail>
                        <img
                          *ngIf="t.url.startsWith('data')"
                          [src]="t.url"
                          style="max-height:110px; max-width:110px; height:auto; width:auto;"
                        />
                      </td>
                    </tr>
                    <tr>
                      <td align="center">
                        <ng-container
                          *ngIf="t.url.startsWith('data'); else showdate"
                        >
                          Uploading &nbsp;
                          <mat-spinner
                            style="display: inline"
                            [diameter]="20"
                          ></mat-spinner>
                        </ng-container>
                        <ng-template #showdate>
                          {{ t.ts | date: 'short' }}
                        </ng-template>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </cdk-virtual-scroll-viewport>
          </div>
        </td>
      </tr>
    </table>

    <p></p>
  </ng-container>
</ng-container>
